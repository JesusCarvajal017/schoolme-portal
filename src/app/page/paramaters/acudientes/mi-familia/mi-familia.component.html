
<!-- ============================================== Encabezado ============================================== -->
<header tuiHeader class="m-1">
  <h1 tuiTitle>
    <div class="col-12 d-flex">
      <mat-icon class="m-1 hover-portal" [routerLink]="'/dashboard/acudientes'">arrow_back</mat-icon>
      <span>Mi familia</span>
      <p class="count">{{ filteredTeacher.length }} Relaciones</p>
    </div>
  </h1>
  <aside tuiAccessories>
    <div tuiAppearance="secondary" tuiButtonGroup>          
      <app-modal-material></app-modal-material>
    </div>
  </aside>
</header>

<!-- ============================================== Cuerpo ============================================== -->

<section class="table-container">
  <!-- Tabs -->
  <div class="col-12 row ">
    <div class="col-6">
      <div class="tabs">
        <button [ngClass]="{'active' : idicadorActive}" (click)="cambiarStatus(1)">Activos</button>
        <button [ngClass]="{'active' : idicadorActive == 0}" (click)="cambiarStatus(0)">Inactivos</button>
      </div>
    </div>
    <div class="col-6 d-flex justify-content-end">
      <!-- Buscador -->
      <div class="actions">
        <div class="search-box m-1">
          <mat-icon>search</mat-icon>
          <input #searchInput type="text" placeholder="Buscar..." (input)="onSearch(searchInput.value)" />
        </div>
      </div>
    </div>
  </div>

<app-listado-generico [elements]="filteredTeacher">
  <ng-container contenido>
    <section class="table-container">
      <!-- Tabla -->
      <table class="custom-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Relacion</th>
            <th>Estudiante</th>
            <th>Tipo</th>
            <th>Identificación</th>
            <th>Status</th>
            <th class="text-center">Acción</th>
          </tr>
        </thead>
        <tbody>
          @for (item of paginatedUsers; track item.id) {
          <tr>
            <td>{{ ($index + 1) + (currentPage - 1) * pageSize }}</td>
            <td>{{ transpRelation(item.relationShipType) }}</td>
            <td>{{ item.nameStudent}}</td>
            <td>{{ item.acronymDocument }}</td>
            <td>{{ item.identification }}</td>
            <td>
              <mat-slide-toggle [checked]="item.status === 1" (change)="logical($event, item.id)"></mat-slide-toggle>
            </td>
            <td class="actions-col">
              <button mat-icon-button [swal]="{
                    title: 'Confirmacion',
                    text: '¿Deseas borrar este registro?',
                    showCancelButton: true
                }" (confirm)="deleteRegister(item.id, item.id)">
                <mat-icon>delete</mat-icon>
              </button>
              
            </td>
          </tr>
          }
        </tbody>
      </table>

      <!-- Paginación -->
      <div class="pagination" *ngIf="totalPages > 1">
        <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
          &lt;
        </button>

        <button *ngFor="let page of [].constructor(totalPages); let i = index" (click)="changePage(i + 1)"
          [class.active]="currentPage === i + 1">
          {{ i + 1 }}
        </button>

        <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">
          &gt;
        </button>
      </div>
    </section>
  </ng-container>
</app-listado-generico>





