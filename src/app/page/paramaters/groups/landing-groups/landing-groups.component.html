<div class="col-12 row">
  <div class="col-md-3">
    <div class="grades-card">
      <div class="grades-title">grados</div>

      <hr>

      <div class="grades-list">
        <label class="grade-option" (click)="notMatriculate()">
          <input type="radio" name="grado" checked>
          <span>En proceso</span>
        </label>

        @if(grades){
          @for (item of grades; track $index) {
            <label class="grade-option" (click)="listTutions(item.id)">
              <input type="radio" name="grado">
              <span>{{item.name}}</span>
            </label>  
          }
        }@else {
          <label class="grade-option">no hay grados existentes</label>
        }
      </div>
    </div>
  </div> 


  <div class="col-md-9">
    <header tuiHeader class="m-1">
      <h1 tuiTitle>
        <div class="col-12 d-flex">
          <span>Proceso de matricula</span>
        </div>
      </h1>
    </header>

    @if(!idicadorProceso){
      <app-listado-generico [elements]="tutions">
        <ng-container contenido>
          <section class="table-container">
            <table class="custom-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Nombre del estudiante</th>
                  <th class="text-center">Acción</th>
                </tr>
              </thead>
              <tbody>
                @for (item of tutions; track item.id) {
                  <tr>
                    <td>{{ ($index + 1) + (currentPage - 1) * pageSize }}</td>
                    <td>{{ `${item.fullName}`}}</td>
        
                    <td class="actions-col">
                      <button mat-icon-button [swal]="{
                            title: 'Confirmacion',
                            text: '¿Deseas borrar este registro?',
                            showCancelButton: true
                        }" (confirm)="deleteRegister(item.id)">
                        <mat-icon>delete</mat-icon>
                      </button>
          
                    </td>
                  </tr>
                }
              </tbody>
            </table>
        
            <!-- Paginación -->
            <div class="pagination" *ngIf="totalPages > 1">
              <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
                &lt;
              </button>
        
              <button *ngFor="let page of [].constructor(totalPages); let i = index" (click)="changePage(i + 1)"
                [class.active]="currentPage === i + 1">
                {{ i + 1 }}
              </button>
        
              <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">
                &gt;
              </button>
            </div>
          </section>
  
        </ng-container>
  
      </app-listado-generico>
    }@else {
      <app-listado-generico [elements]="studentsNotTution">
        <ng-container contenido>
          <section class="table-container">
            <table class="custom-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Identificacion</th>
                  <th>Tipo</th>
                  <th>Nombre del estudiante</th>
                  <th class="text-center">Acción</th>
                </tr>
              </thead>
              <tbody>
                @for (item of studentsNotTution; track item.id) {
                <tr>
                  <td>{{ ($index + 1) + (currentPage - 1) * pageSize }}</td>
                  <td>{{ item.acronymDocument }}</td>
                  <td>{{ item.identification }}</td>
                  <td>{{ item.fullName }}</td>
        
                  <td class="actions-col">
                    <button mat-icon-button (click)="modalCommand(item.fullName, item.id)" >
                      <mat-icon>assignment</mat-icon>
                    </button>
        
                  </td>
                </tr>
                }
              </tbody>
            </table>
        
            <!-- Paginación -->
            <div class="pagination" *ngIf="totalPages > 1">
              <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
                &lt;
              </button>
        
              <button *ngFor="let page of [].constructor(totalPages); let i = index" (click)="changePage(i + 1)"
                [class.active]="currentPage === i + 1">
                {{ i + 1 }}
              </button>
        
              <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">
                &gt;
              </button>
            </div>
          </section>
        </ng-container>
      </app-listado-generico>
    } 

  </div>


<ng-template let-observer [tuiDialogOptions]="{label: ninoSelect , size: 'm'}" [(tuiDialog)]="open">
  <div class="modal-content">



    <div class="col-12 p-3">
      <form [formGroup]="formTution" (submit)="matricular()">
         <div class="col-12">
             <mat-form-field appearance="outline" class="tui-like-select">
                 <mat-label>Grado a matricular</mat-label>
  
                 <mat-select panelClass="tui-like-select-panel" [formControl]="formTution.controls.gradeId">
                     @for (item of grades; track $index) {
                         <mat-option [value]="item.id">{{ item.name }}</mat-option>
                     }
                 </mat-select>
             </mat-form-field>
  
         </div>
  
     
         <div>
             
         <button mat-button type="submit" class="m-1" [disabled]="formTution.invalid">
             <mat-icon class="m-1">add</mat-icon>
             Matricular
         </button>
         </div>
     </form>
    </div>
      <!-- formulario de matricular     -->
  </div>
</ng-template>